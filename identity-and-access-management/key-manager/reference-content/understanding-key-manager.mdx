---
meta:
  title: Understanding Scaleway Key Manager
  description: Discover the robust encryption methods used by Secret Manager to safeguard sensitive data effectively. Learn about the Hierarchical Key Management System and its pivotal role in securing encryption keys and data integrity.
content:
  h1: Understanding Scaleway Key Manager
  paragraph: Discover the robust encryption methods used by Secret Manager to safeguard sensitive data effectively. Learn about the Hierarchical Key Management System and its pivotal role in securing encryption keys and data integrity.
tags: key-manager encryption data key
dates:
  validation: 2024-12-09
  posted: 2024-12-09
categories:
  - identity-and-access-management
---

## How does Key Manager work?

You will find a diagram in the box below on best practices for how Key Manager works.

It is recommended to use keys stored in Key Manager as [key encryption keys (KEK)](), which are used to encrypt and decrypt [data encryption keys (DEKs)]() stored on the client side.

## Why use data encryption keys?

Unlike key encryption keys, which cannot be accessed, you can use data encryption keys (DEK) to encrypt your data. You can also use data encryption keys outside of Scaleway Key Manager.

The main benefit of using DEKs is that you do not have to re-encrypt your data at each rotation performed in Key Manager. Only the DEK needs to be re-encrypted with a new KEK.

By rotating solely the KEK, the security of data-at-rest is reinforced without needing heavy encryption operations.

When Key Manager generates data encryption keys, it returns a plaintext version of your key for immediate use, and a ciphertext, which is an encrypted copy of the data encryption key, that you can safely store.

    <Message type="important">
     Do not store your data encryption key's plaintext. When you want to decrypt your data, you need to go through Key Manager to decrypt the encrypted DEK. Find out [how to decrypt your data with Tink](LINK).
     While Scaleway Key Manager is responsible for generating, encrypting, and decrypting data encryption keys, it does not store, manage, or monitor them, nor does it engage in cryptographic operations with these keys. **You must use and manage data encryption keys outside of Scaleway's Key Manager**.
    </Message>

## Key usage and algorithms

The key usage specifies the **algorithm** used to create subsequent key versions, and the **scope of cryptographic operations** supported by the key. As of now, **only symmetric encryption is supported**.

Keys with a key usage set to `symmetric_encryption` are **used to encrypt and decrypt data**.

Key Manager currently **only supports the `AES-256-GCM` key algorithm**. The following parameters, in compliance with the [recommendations of ANSSI](https://cyber.gouv.fr/publications/mecanismes-cryptographiques), are used when creating and using a key with the `AES-256 GCM` algorithm.

### Key derivation algorithm

HMAC-based Extract-and-Expand Key Derivation Function (HKDF) as defined in RFC 5869 with SHA-256 as hash algorithm.


### Key material

A sequence of 256-bits is created from a cryptographically secure random number generator, drawing its entropy from a `/dev/urandom` source. This key material is fed into the key derivation algorithm to create a new key version.

### Key version length

A key version length of 256 bits.

### Block cipher

Galois Counter Mode (GCM) with a block size of 128-bits.
