---
meta:
  title: How to connect to a Kubernetes Kapsule cluster with kubectl
  description: Learn how to connect to a Kubernetes cluster using kubectl. Follow steps to manage cluster resources, deploy applications, and view logs easily from your local computer.
content:
  h1: How to connect to a Kubernetes Kapsule cluster with kubectl
  paragraph: This guide details the steps to connect to a Kubernetes cluster using kubectl, the Kubernetes command-line tool.
tags: connection cluster kubectl
dates:
  validation: 2025-01-15
  posted: 2020-09-20
categories:
  - kubernetes
---

Once your [cluster is created](/containers/kubernetes/how-to/create-cluster/), you can install a `kubeconfig` file unsing Scaleway's command-line tool on your local machine to manage your Kubernetes cluster.

You can use this with `kubectl`, the Kubernetes command-line tool, to run commands against your Kubernetes cluster. This enables you to deploy applications, inspect and manage cluster resources, and view logs directly from your local machine.

<Macro id="requirements" />

- A [Scaleway account](https://console.scaleway.com) logged into the console.
- [Owner status](https://console.scaleway.com) or [IAM permissions](/identity-and-access-management/iam/concepts/#permission) to perform actions in the intended Organization.
- Created a [Kubernetes Kapsule cluster](/containers/kubernetes/how-to/create-cluster/)
- [kubectl](https://kubernetes.io/docs/tasks/tools/) installed locally.
- The [Scaleway CLI](/developer-tools/scaleway-cli/quickstart/) installed locally.

## Setting fine-grained permissions (IAM Policies) for Kubernetes access

If your Organization uses IAM to control access, ensure that you or your group/application has the following permission sets assigned at the Project scope:

- `KubernetesFullAccess` (or `KubernetesReadOnly`, depending on your needs):
  Grants you the ability to manage (or list/read) Kubernetes clusters, nodes, and related actions in your Scaleway Project.

To create a new policy with the correct permission sets, follow these steps:

### Key elements of IAM Policy configuration

1. **Create a new policy**: Navigate to the **Policies** tab in your Organizationâ€™s IAM console and create a new policy.
2. **Add your user (or group/application)**: Assign your user, group, or application as the **Principal**.
3. **Add an IAM rule**:
   - **Scope**: Set to **Access to resources** and specify the desired Project(s).
   - **Permission Sets**: Include the following as needed:
     - `KubernetesFullAccess` for full cluster management.
     - `KubernetesReadOnly` for read-only access.
4. Click **Validate** and then **Create Policy**.

Refer to our [policy and permission sets documentation](/identity-and-access-management/iam/reference-content/permission-sets/) for more details.

## Accessing the cluster

You can use the Scaleway CLI to automatically retrieve (and merge) your `kubeconfig` file, then interact with your Kubernetes cluster.

### Install and configure the Scaleway CLI

If you have not set up the Scaleway CLI yet:

1. Follow our [installation guide](/developer-tools/scaleway-cli/quickstart) for platform-specific instructions using Homebrew, Chocolatey, or manual methods.
2. Run the following command and follow the prompts to set up your CLI with your Scaleway API keys:
   ```bash
   scw init
   ```
   You will need your [API Key](https://identity-and-access-management/iam/how-to/#creating-API-keys) (access key and secret key).

### Retrieve and install the kubeconfig using `scw`

1. Run the following command to install the kubeconfig file for your cluster:
   ```bash
   scw k8s kubeconfig install <cluster-id>
   ```
   This command will:
   - Download the `kubeconfig` for the specified cluster.
   - Merge it into your existing kubeconfig file (default location: `~/.kube/config`).

2. Verify the installation:
   ```bash
   kubectl get nodes
   ```
   A list of nodes from your Kapsule cluster should appear. If not, review the troubleshooting section.
