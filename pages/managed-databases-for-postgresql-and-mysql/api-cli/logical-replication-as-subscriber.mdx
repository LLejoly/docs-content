---
meta:
  title: Setting up logical replication as a subscriber in PostgreSQL
  description: Learn how to set up and use logical replication as a subscriber in PostgreSQL to migrate your database with zero downtime
content:
  h1: Setting up logical replication as a subscriber in PostgreSQL
  paragraph: This page explains how to set up and use logical replication as a subscriber in PostgreSQL to migrate your database to Scaleway, with zero downtime and real-time data synchronization
tags: postgresql logical replication subscriber migration database
dates:
  validation: 2025-02-20
  posted: 2025-02-20
---

The logical replication of databases as a subscriber is available with PostgreSQL 16, which is now supported in Scaleway's Managed Databases for PostgreSQL.

The feature allows you to replicate data from one database to another in real-time, without having to replicate the entire database, and keep them in sync, without having to take the original database offline or lock it for an extended period.

Logical replication is especially useful when migrating your databases to Scaleway's Managed Databases.

By setting up the new database as a subscriber to the original database you can ensure:
    - **Zero-downtime migration** - Migrate your data without taking the original database offline. Your applications can continue to write data to the original database while the new database is being populated.
    - **Real-time data synchronization** - The subscriber database receives updates in real-time, ensuring that data is consistent between the two databases.
    - **Flexible migration window** - You can choose when to switch your application to the new database, without having to worry about data consistency as logical replication ensures that the new database is always up-to-date with the latest changes from the original database.
    - **Easy rollback** - If something goes wrong during the migration, such as data corruption, application issues, or other problems, you can point your application back to the original database. Because the subscriber database has been keeping a copy of the data in sync with the publisher, you can avoid data loss or inconsistencies.


## How to set up the subscription

To be able to create a subscription, you must have the privileges of the the pg_create_subscription role, as well as CREATE privileges on the current database.


```
CREATE SUBSCRIPTION subscription_name
    CONNECTION 'conninfo'
    PUBLICATION publication_name [, ...]
    [ WITH ( subscription_parameter [= value] [, ... ] ) ]
```

<Message type="important">
  Subscriptions in the same database cannot have the same name.
</Message>


How to set it up:
See Â https://www.postgresql.org/docs/16/sql-createsubscription.html to create a subscription on a Managed PostgreSQL and this example:

GRANT pg_create_subscription TO myuser;
CREATE SUBSCRIPTION mysub CONNECTION 'host=212.47.254.155 port=5432 user=repli password=XXXXXXXXX dbname=postgres application_name=mysub' PUBLICATION mypub;

# Get subscription stats
GRANT pg_read_all_stats TO myuser;
SELECT * FROM pg_stat_subscription;

# Get subscription configuration
GRANT pg_read_all_data TO myuser;
SELECT * FROM pg_subscription;

See https://www.postgresql.org/docs/16/sql-createpublication.html on how to set up a publication on your publisher database

Number of subscriptions that can be created per offer: see https://confluence.infra.online.net/spaces/RDB/pages/254436279/Postgres+Logical+Replication#PostgresLogicalReplication-UpdatePostgresQLsettingsbynodetype. From that table, we only want to show the "Node type" and "scw.pg_create_subscription_threshold" (renamed "Max number of subscriptions" in our documentation page) columns.
Messaging to be worked on how to be transparent on this section: https://confluence.infra.online.net/spaces/RDB/pages/254436279/Postgres+Logical+Replication#PostgresLogicalReplication-SubscriptionandpublicIP


